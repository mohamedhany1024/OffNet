"use strict";(self.webpackChunkeuronews=self.webpackChunkeuronews||[]).push([[436],{74004:()=>{const t=class{constructor(){return this.connection=null,this.connectionType=null,this.bandwidth="slow",this.init(),this}init(){if(this.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,this.initBandwidth(),this.connection){this.connectionType=this.connection.effectiveType;let t=this;this.connection.addEventListener("change",(()=>{console.log("Connection type changed from "+t.connectionType+" to "+t.connection.effectiveType),t.connectionType=t.connection.effectiveType,t.initBandwidth(),window.dispatchEvent(new CustomEvent("connection_change",{detail:this}))}))}return this}initBandwidth(){return this.bandwidth="slow",this.getDownlink()>=1.6&&(this.bandwidth="fast"),this}getDownlink(){return this.connection?this.connection.downlink:2}getMaxBandwidth(){return this.connection?this.connection.downlinkMax:2}getType(){return this.connectionType}getBandwidth(){return this.bandwidth}};const e=class{constructor(e){this.keyValues=e,this.connection=new t}getFeatureFlippingForBandwidth(t){return this.keyValues.feature_flipping.hasOwnProperty(t)?this.keyValues.feature_flipping[t]:null}isFeatureActive(t,e){e||(e=window.GlobalStore.locale);let i=this.connection.getBandwidth();if(!this.keyValues.hasOwnProperty("feature_flipping"))return!1;let n=this.getFeatureFlippingForBandwidth(i);if(n){if(!n.hasOwnProperty(t))return!1;if(e&&n[t].hasOwnProperty("languages")&&n[t].languages.hasOwnProperty(e)&&n[t].languages[e])return!n[t].hasOwnProperty("thirdpart")||!n[t].thirdpart||this.isThirdPartyEnable(t,e)}return!1}isThirdPartyEnable(t,e){e||(e=window.GlobalStore.locale);try{if(new URL(window.location.href).searchParams.get("wipethirdparties"))return!1}catch(r){}if(!this.keyValues.hasOwnProperty("feature_flipping"))return!1;const i=this.connection.getBandwidth(),n=this.getFeatureFlippingForBandwidth(i);return!(!n||n.hasOwnProperty(t))||!!(e&&n&&n[t].hasOwnProperty("languages")&&n[t].languages.hasOwnProperty(e)&&n[t].languages[e]&&n[t].hasOwnProperty("thirdpart")&&n[t].thirdpart)}getThirdPartAdsTimeout(){return isNaN(this.keyValues.third_part_ads_timeout)?1e4:this.keyValues.third_part_ads_timeout}};const i=class{constructor(t){this.configuration=t}isThirdPartActive(t){return!!this.configuration.hasOwnProperty("thirdParts")&&(!!this.configuration.thirdParts.hasOwnProperty(t)&&!!this.configuration.thirdParts[t])}};const n=class{constructor(){let{verticalConfig:t={},currentVertical:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.verticalSites=t.vertical_site,this.defaultWebsite=t.website,this.currentVertical=e}getCurrentVertical(){return this.currentVertical}getCurrentWebsite(){return this.hasOwnDesign(this.currentVertical)?this.currentVertical:this.defaultWebsite}currentVerticalHasOwnDesign(){return null!==this.currentVertical&&this.hasOwnDesign(this.currentVertical)}currentVerticalIsActive(){return this.isActive(this.currentVertical)}hasVerticalConfig(t){try{return!!this.verticalSites[t]}catch(e){return!1}}hasOwnDesign(t,e){return this._isPropertyEnabled("own_design",t,e)}isActive(t,e){return this._isPropertyEnabled("active",t,e)}_isPropertyEnabled(t,e,i){var n,r,o,s;i=i||(null===(n=window)||void 0===n||null===(r=n.GlobalStore)||void 0===r?void 0:r.locale)||(null===(o=window)||void 0===o||null===(s=o.digitalData)||void 0===s?void 0:s.site.language);try{return!!this.verticalSites[e][t][i]}catch(a){return!1}}},r=["appKey","pageType","testSegment"];class o{constructor(t){this._validate(t),this.config=t}_validate(t){r.forEach((e=>{if(!(e in t))throw Error(`Poool configuration error. Missing prop ${e} in config. Expected Props: ${r.join(", ")}`)}))}getAppKey(){return this.config.appKey}getPageType(){return this.config.pageType}getTestSegment(){return this.config.testSegment}hasTestSegment(){return!!this.config.testSegment}setPageType(t){this.config.pageType=t}}class s{constructor(t){this.config=t,this.api=new a(this)}_missingConfigLog(t,e){console.error(`OwnpageConfiguration: Missing configuration for: ${t}. Please notify Euronews dev team:`,e)}getFormKey(t,e){const i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"test":e;try{if(!this.config.formKeys[t][i])throw Error("missing config");return this.config.formKeys[t][i]}catch(n){this._missingConfigLog(`formKeys['${t}']['${i}']`)}}getTrackingKey(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"euronews";try{if(!this.config.trackingKeys[t])throw Error("missing config");return this.config.trackingKeys[t]}catch(e){this._missingConfigLog(`trackingKeys['${t}']`)}}getApi(){return this.api}}class a{constructor(t){this.ownpageConfig=t}async subscribe(t){let{email:e,appName:i="euronews",purpose:n,locale:r,isTest:o}=t;return new Promise(((t,s)=>{const a=this.ownpageConfig.getTrackingKey(i),c={form_key:this.ownpageConfig.getFormKey(n,r,o),email:e};fetch(`https://services.ownpage.fr/v1/subscribe/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>e.ok?t(e):s(e)))}))}}const c={trackingKeys:{euronews:"6cef003ce8374f5b"},formKeys:{poool:{test:"9b906b86f30045c4",en:"7f3a96a673ef4f8a",tr:"5bde928e6a164d23",es:"8c36bd0c555f4c86",pt:"55d7e279a5ad4749",fr:"f435454cbbba464b",de:"60fc0a3a805d4566",ru:"0486ce5b40c0411f",it:"cb856430696643f7"}}};const h=class{constructor(){if(void 0!==window.globalStore)return void console.debug("GlobalStore is already defined");let t=document.head.querySelector("meta[name=global-store-data]");null===t&&console.error("GlobalStore is undefined !"),this.build(t.content)}build(t){const e=this.decryptData(t);e.ownpage=c;for(let i in e)this.createProperty(i,e[i])}createProperty(t,r){switch(t){case"keyValues":this.keyValues=new e(r);break;case"pageConfiguration":this.pageConfiguration=new i(r);break;case"verticalConfiguration":this.verticalConfiguration=new n(r);break;case"poool":this.poool=new o(r);break;case"ownpage":this.ownpage=new s(r);break;default:this[t]=r}}decryptData(t){return JSON.parse(atob(t))}};window.GlobalStore=new h}},t=>{var e;e=74004,t(t.s=e)}]);